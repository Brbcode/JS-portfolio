@use 'sass:math';
@import 'reset';
@import 'mixin';
@import 'flexbox';
@import 'theme';

/**********************************************************
************************** THEME **************************
***********************************************************/

@include theme;

/**********************************************************
************************** UTILS **************************
***********************************************************/

.flex{
  @extend %flex;
}

.flex-row{
  @extend %flex-row;
}

.flex-column{
  @extend %flex-column;
}

.align-items-center{
  @extend %align-items-center;
}

.justify-content-space-between{
  @extend %justify-content-space-between;
}

/**********************************************************
************************** STYLE **************************
***********************************************************/

html{
  height: 100vh;
  overflow-x: hidden;
}

body{
  background: t-var('body-color');
  color: t-var('primary-font-color');
  height: 100vh;
  
}

#root {
  min-height: 100vh;
  width: 100%;
  background-image: linear-gradient(270deg,#1b1429,#140f23);
  background: repeat url('./img/background.gif');

  > header{
    position: fixed;
    top: 0;
    z-index: z('site-header');
    width: 100vw;    
    height: t-var('header-height');
    background: t-var('primary-color');
    padding: 1em 2em;    

    > nav{
      position: fixed;
      top: t-var('header-height');      
      left: 0;
      background: inherit;
      width: 100vw;
      height: 0;      
      box-sizing: border-box;
      overflow: hidden;            
      $duration: .3s;
      -webkit-transition-duration: $duration;
           -o-transition-duration: $duration;
              transition-duration: $duration;
      $height-controller: 16px;

      &.active{
        visibility: visible;
        border-top: 1px solid rgba(t-var('active-color',true),.5);
        height: calc(100vh - t-var('header-height'));        
        padding: .5em 2em $height-controller 2em;   
        $delay: 1s;         
        -webkit-transition-delay: $delay;
             -o-transition-delay: $delay;
                transition-delay: $delay;
      }

      &::before{
        @include pseudo;
        $height: $height-controller;
        left: 0;
        bottom: 0;
        background: inherit;
        width: 100vw;
        height: $height;
      }

      &::after{
        @include pseudo;
        @include rounded;
        $height: 7px;
        left: 50vw;
        @include transform(translateX(-50%));
        bottom: 1*$height - math.div($height-controller - $height,2);        
        width: 75px;
        height: $height;
        background: t-var('active-color');
        @include box-shadow(inset 0 0 4px rgba(t-var('primary-color',true),1));
      }

      ul{
        @include grid;
        grid-template-columns: 1fr 1fr;
        gap: 1em;

        li{
          &:nth-child(odd):last-child{
            grid-column: 1/3;
          }
        }

        a{          
          display: inline-block;
          width: 100%;
          @include rounded;
          padding: 1em .6em;
          border: 1px solid t-var('active-color');
          font-weight: 700;

          &.active{
            background: t-var('active-color');
            color: t-var('active-text-color');
          }
        }
      }
    }  
  }

  > main{
    z-index: z('site-main');
    padding: 1em 2em;
    padding-top: calc( t-var('header-height') + 1em);  
    min-width: 100vw;      
    @include flex-grow(1);
  }

  > footer{        
    z-index: z('site-footer');
    text-align: center;
    padding: 1em 2em;
    background: t-var('primary-color');
    color: rgb(160, 160, 160);
    font-size: 9pt;
    gap: 1em;    
    font-weight: 700;
  }
}


@include mq('tablet'){
  #root{
    > header{
      background: transparent;
      transition: background-color .3s;

      &.sticky{
        backdrop-filter: blur(10px);
        background-color: #1b1a2e63;
        box-shadow: 0 10px 10px 0 rgba(9,5,29,.171);
      }
      @supports not (selector(:has(*))){
        background-color: t-var('primary-color');
      }
      &:has(>nav.active){
        background-color: t-var('primary-color');
      }
    }
  }
}

.toremove{
  width: 10px;
  background: red;
  height: 150vh;
}